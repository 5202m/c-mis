$(function(){var a=$("#firstMenu");$.ajax({url:allUrl,dataType:"json",cache:false,success:function(d){addAccordionsAll(d)}});addAccordionsAll=function(f){var g=f.first;var e;if(g.length>0){e=g[0].title;for(var d=0;d<g.length;d++){a.accordion("add",{title:g[d].title,iconCls:g[d].iconCls,content:secondMenuAll(f["second"+g[d].id])})}a.accordion("select",e)}};secondMenuAll=function(e){var d=$("<ul></ul>");d.tree({data:e,onClick:menuOnClick,onDblClick:menuonDblClick});return d};menuOnClick=function(d){addTab(d)};menuonDblClick=function(d){if(d.state=="closed"){$(this).tree("expand",d.target)}else{$(this).tree("collapse",d.target)}};var b=$("#centerTabs");var c=$("#tabsMenu");b.tabs({fit:true,border:false,onContextMenu:function(d,f){d.preventDefault();c.menu("show",{left:d.pageX,top:d.pageY}).data("tabTitle",f)}});c.menu({onClick:function(k){var e=$(this).data("tabTitle");var j=$(k.target).attr("type");if(j==="refresh"){refreshTab(e);return}if(j==="close"){var g=b.tabs("getTab",e);if(g.panel("options").closable){b.tabs("close",e)}return}var d=b.tabs("tabs");var h=[];$.each(d,function(){var i=$(this).panel("options");if(i.closable&&i.title!=e&&j==="closeOther"){h.push(i.title)}else{if(i.closable&&j==="closeAll"){h.push(i.title)}}});for(var f=0;f<h.length;f++){b.tabs("close",h[f])}}});addTab=function(e){if(b.tabs("exists",e.text)){b.tabs("select",e.text)}else{if(e.attributes&&e.attributes.url&&e.attributes.url.length>0){var d=path+e.attributes.url;b.tabs("add",{title:e.text,iconCls:e.iconCls,closable:true,content:'<iframe src="'+d+'" frameborder="0" style="border:0;width:100%;height:99.4%;"></iframe>',tools:[{iconCls:"icon-mini-refresh",handler:function(){refreshTab(e.text)}}]})}}};refreshTab=function(e){var d=b.tabs("getTab",e);b.tabs("update",{tab:d,options:d.panel("options")})}});
